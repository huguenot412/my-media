

<!-- <input [(ngModel)]="searchQuery" name="searchQuery" (ngModelChange)="onInputChange()" placeholder="Search games by name"> -->
<mat-form-field class="example-form-field">
  <mat-label>Search games by name</mat-label>
  <input matInput type="text" [(ngModel)]="searchQuery" (ngModelChange)="onInputChange()">
  @if (searchQuery) {
    <button matSuffix mat-icon-button aria-label="Clear" (click)="searchQuery=''">
      <mat-icon>close</mat-icon>
    </button>
  }
</mat-form-field>


@let searchResults = searchResults$ | async;

@if (!searchResults?.length && searchQuery) {
  <p>Loading...</p>
} @else {
  @for (game of searchResults; track $index) {
    <mat-card appearance="outlined" class="game">
      <mat-card-header>
        <mat-card-title>
          <p>{{ game.name }}</p>
        </mat-card-title>
      </mat-card-header>
      @if (game.cover?.url) {
        <div class="cover-art-container">
          <img mat-card-image class="cover-art" [ngSrc]="game.cover?.url!.replace('t_thumb', 't_cover_big')" alt="Cover Art" fill>
        </div>
      }
      <mat-card-actions>
        <button mat-button (click)="addGame(game, 'playing')">Playing</button>
        <button mat-button (click)="addGame(game, 'played')">Played</button>
        <button mat-button (click)="addGame(game, 'backlog')">Backlog</button>
        @if (gameListsStore.userCreatedLists().length) {
          <select name="lists" id="lists">
            <option value="" disabled selected>--Choose a list--</option>
            @for (list of gameListsStore.userCreatedLists(); track list.id) {
              <option [value]="list" (click)="addGame(game, list.id)">{{ list.name }}</option>
            }
          </select>
        }
        <fa-icon class="info-icon" [icon]="faCircleInfo" [routerLink]="['../game', game.id]"/>
      </mat-card-actions>
    </mat-card>
    <!-- @if (game.cover?.url) {
      <div class="cover-art-container">
        <img class="cover-art" [ngSrc]="game.cover?.url!.replace('t_thumb', 't_cover_big')" alt="Cover Art" fill>
      </div>
    }
    <button (click)="addGame(game, 'playing')">Playing</button>
    <button (click)="addGame(game, 'played')">Played</button>
    <button (click)="addGame(game, 'backlog')">Backlog</button>
    <fa-icon class="info-icon" [icon]="faCircleInfo" [routerLink]="['../game', game.id]"/> -->

    <!-- @if (gameListsStore.userCreatedLists().length) {
      <select name="lists" id="lists">
        <option value="" disabled selected>--Choose a list--</option>
        @for (list of gameListsStore.userCreatedLists(); track list.id) {
          <option [value]="list" (click)="addGame(game, list.id)">{{ list.name }}</option>
        }
      </select>
    } -->
  }
}

